#! /bin/bash
#
#$Author$
#$Date$
#$HeadURL$
#$Revision$
if (( !($#==2) ))
then
 echo "Usage: ./collect_stats.bash <file> <sport>"
 exit 1
else
if [[ !(-e $1) ]]
then
 echo "Error: $1 does not exist"
 exit 2
else
 numAthletes=0
 numMedals=0
 maxMedals=0
 while read line
do
 name=$(echo $line | cut -d ',' -f1)
 sport=$(echo $line | cut -d ',' -f2)
 medals=$(echo $line | cut -d ',' -f3)

 if [[ ("$sport" = "$2") ]]
 then
 ((numAthletes=$numAthletes+1))
 ((numMedals=$numMedals+$medals))
 if (( $medals>$maxMedals ))
 then
  ((maxMedals=$medals))
  winnerName=$name
 fi
 fi
done < $1
 echo "Total athletes: $numAthletes"
 echo "Total medals won: $numMedals"
 echo "$winnerName won the most medals: $maxMedals"
 exit 0
fi
fi
